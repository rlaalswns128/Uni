{"ast":null,"code":"const apiUrl = 'http://localhost:8080/api/auth'; // Update with your actual API URL\n\nexport const signIn = async signInData => {\n  try {\n    const response = await fetch(`${apiUrl}/signIn`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(signInData)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to sign in');\n    }\n    const data = await response.json();\n    localStorage.setItem('token', data.token);\n    return response;\n  } catch (error) {\n    // Explicitly specify 'any' type for error\n    console.error('Error during sign in:', error.message);\n    throw error; // Rethrow the error to propagate it further\n  }\n};\nexport const register = async registerData => {\n  try {\n    const response = await fetch(`${apiUrl}/signUp`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(registerData)\n    });\n    if (!response.ok) {\n      throw new Error('Failed to register');\n    }\n    return response;\n  } catch (error) {\n    // Explicitly specify 'any' type for error\n    console.error('Error during registration:', error.message);\n    throw error; // Rethrow the error to propagate it further\n  }\n};\nexport const getUserProfile = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No token found');\n  }\n  try {\n    const response = await fetch(`${apiUrl}/profile`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Failed to fetch user profile');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching user profile:', error.message);\n    throw error;\n  }\n};","map":{"version":3,"names":["apiUrl","signIn","signInData","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","message","data","localStorage","setItem","token","error","console","register","registerData","getUserProfile","getItem"],"sources":["/Users/kimminjune/startup_project/WhiskyPedia/front/src/apis/Authorisation.ts"],"sourcesContent":["interface SignInData {\n  userEmail: string;\n  userPassword: string;\n}\n\ninterface RegisterData {\n  userEmail: string;\n  userName: string;\n  userPassword: string;\n  userPwConfirm: string;\n}\n\ninterface UserProfileData {\n  userEmail: string;\n  userName: string;\n}\n\nconst apiUrl = 'http://localhost:8080/api/auth'; // Update with your actual API URL\n\nexport const signIn = async (signInData: SignInData): Promise<Response> => {\n  try {\n    const response = await fetch(`${apiUrl}/signIn`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(signInData),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to sign in');\n    }\n\n    const data = await response.json();\n    localStorage.setItem('token', data.token);\n    return response;\n  } catch (error: any) { // Explicitly specify 'any' type for error\n    console.error('Error during sign in:', error.message);\n    throw error; // Rethrow the error to propagate it further\n  }\n};\n\nexport const register = async (registerData: RegisterData): Promise<Response> => {\n  try {\n    const response = await fetch(`${apiUrl}/signUp`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(registerData),\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to register');\n    }\n\n    return response;\n  } catch (error: any) { // Explicitly specify 'any' type for error\n    console.error('Error during registration:', error.message);\n    throw error; // Rethrow the error to propagate it further\n  }\n};\n\nexport const getUserProfile = async (): Promise<UserProfileData> => {\n  const token = localStorage.getItem('token');\n\n  if (!token) {\n    throw new Error('No token found');\n  }\n\n  try {\n    const response = await fetch(`${apiUrl}/profile`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch user profile');\n    }\n\n    const data: UserProfileData = await response.json();\n    return data;\n  } catch (error: any) {\n    console.error('Error fetching user profile:', error.message);\n    throw error;\n  }\n};"],"mappings":"AAiBA,MAAMA,MAAM,GAAG,gCAAgC,CAAC,CAAC;;AAEjD,OAAO,MAAMC,MAAM,GAAG,MAAOC,UAAsB,IAAwB;EACzE,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,MAAO,SAAQ,EAAE;MAC/CK,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,UAAU;IACjC,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAACF,SAAS,CAACG,OAAO,IAAI,mBAAmB,CAAC;IAC3D;IAEA,MAAMC,IAAI,GAAG,MAAMZ,QAAQ,CAACS,IAAI,CAAC,CAAC;IAClCI,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,KAAK,CAAC;IACzC,OAAOf,QAAQ;EACjB,CAAC,CAAC,OAAOgB,KAAU,EAAE;IAAE;IACrBC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACL,OAAO,CAAC;IACrD,MAAMK,KAAK,CAAC,CAAC;EACf;AACF,CAAC;AAED,OAAO,MAAME,QAAQ,GAAG,MAAOC,YAA0B,IAAwB;EAC/E,IAAI;IACF,MAAMnB,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,MAAO,SAAQ,EAAE;MAC/CK,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACa,YAAY;IACnC,CAAC,CAAC;IAEF,IAAI,CAACnB,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIG,KAAK,CAAC,oBAAoB,CAAC;IACvC;IAEA,OAAOV,QAAQ;EACjB,CAAC,CAAC,OAAOgB,KAAU,EAAE;IAAE;IACrBC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACL,OAAO,CAAC;IAC1D,MAAMK,KAAK,CAAC,CAAC;EACf;AACF,CAAC;AAED,OAAO,MAAMI,cAAc,GAAG,MAAAA,CAAA,KAAsC;EAClE,MAAML,KAAK,GAAGF,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAACN,KAAK,EAAE;IACV,MAAM,IAAIL,KAAK,CAAC,gBAAgB,CAAC;EACnC;EAEA,IAAI;IACF,MAAMV,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,MAAO,UAAS,EAAE;MAChDK,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,eAAe,EAAG,UAASY,KAAM,EAAC;QAClC,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;IAEF,IAAI,CAACf,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIG,KAAK,CAAC,8BAA8B,CAAC;IACjD;IAEA,MAAME,IAAqB,GAAG,MAAMZ,QAAQ,CAACS,IAAI,CAAC,CAAC;IACnD,OAAOG,IAAI;EACb,CAAC,CAAC,OAAOI,KAAU,EAAE;IACnBC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACL,OAAO,CAAC;IAC5D,MAAMK,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}